(this["webpackJsonpgrapl-fe"]=this["webpackJsonpgrapl-fe"]||[]).push([[0],{104:function(e,n,t){},147:function(e,n,t){e.exports=t(235)},152:function(e,n,t){},233:function(e,n){},235:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),o=t.n(c),s=(t(152),t(129)),i=t(279),l=t(23),u=t(16),f=(t(104),t(11)),d=t.n(f),p=t(20),m=t(63),h=window.location.host+":8900/",g=function(){var e=Object(p.a)(d.a.mark((function e(){var n,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"checkLogin"),{method:"get",credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return","True"===t.success);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){return r.a.createElement("div",{className:"backgroundImage"},r.a.createElement("div",{className:"grapl"},"Grapl"),r.a.createElement("div",{className:"formContainer"},r.a.createElement(m.c,{initialValues:{userName:"",password:""},onSubmit:function(){var n=Object(p.a)(d.a.mark((function n(t){var a,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k(t.userName,t.password);case 2:a=n.sent,r=x(t.userName,a),alert(r),r?(e.loginSuccess(),console.log("Logged in")):console.warn("Login failed!");case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},r.a.createElement(m.b,null,r.a.createElement(m.a,{name:"userName",type:"text",placeholder:"Username"})," ",r.a.createElement("br",null),r.a.createElement(m.a,{name:"password",type:"password",placeholder:"Password"})," ",r.a.createElement("br",null),r.a.createElement("button",{className:"submitBtn",type:"submit"},"Submit")))))};function b(e){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(d.a.mark((function e(n){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new TextEncoder).encode(n),e.next=3,crypto.subtle.digest("SHA-256",t);case 3:return a=e.sent,r=Array.from(new Uint8Array(a)),e.abrupt("return",r.map((function(e){return("00"+e.toString(16)).slice(-2)})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E,k=function(){var e=Object(p.a)(d.a.mark((function e(n,t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"f1dafbdcab924862a198deaa5b6bae29aef7f2a442f841da975f1c515529d254",e.next=3,b(t+"f1dafbdcab924862a198deaa5b6bae29aef7f2a442f841da975f1c515529d254"+n);case 3:a=e.sent,r=0;case 5:if(!(r<5e3)){e.next=12;break}return e.next=8,b(a);case 8:a=e.sent;case 9:r++,e.next=5;break;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(d.a.mark((function e(n,t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"login"),{method:"post",body:JSON.stringify({username:n,password:t}),headers:{"Content-Type":"application/json"},credentials:"include"});case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return","True"===r.success);case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n,t){return e.apply(this,arguments)}}(),j=t(7),w=t(28),O=t(59),_=t(130),N=t(82),S=t(14),L=function(e,n){var t=e;"object"===typeof e&&(t=e.risk);var a=n.map((function(e){return e||0})).sort((function(e,n){return e-n}));if(void 0===t||0===t||0===a.length)return 0;var r,c=0,o=Object(S.a)(a);try{for(o.s();!(r=o.n()).done;){t>=r.value&&(c+=1)}}catch(s){o.e(s)}finally{o.f()}return Math.floor(c/a.length*100)},P=function(e,n){var t,a=Object(S.a)(n||[]);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.id===e)return r}}catch(c){a.e(c)}finally{a.f()}return null},A=function(e,n){var t=function(e,n){var t=P(e.source.name,n.nodes),a=P(e.target.name,n.nodes);if(!t||!a)return console.error("Missing srcNode/dstNode",t,e,a),0;var r=t.risk||0,c=a.risk||0;return Math.round((r+c)/2)}(e,n),a=Object(w.a)(n.nodes).map((function(e){return e.risk}));return L(t,a)},F=function(e){var n=0;e+="x";for(var t=parseInt(65745979961613.07),a=0;a<e.length;a++)n>t&&(n=parseInt(n/137)),n=131*n+e.charCodeAt(a);return n},C=function(e,n){return"Process"===e.nodeType?[31,185,128]:"File"===e.nodeType?[177,93,255]:n.rgb(e.nodeType)},I=function(e){return"hsl(".concat(40*(100-e)/100,", 100%, 50%)")},M=function(e,n){var t=A(e,n);return 0===t?"white":I(t)},D=(E=":5000/","http://"+window.location.hostname+(E||":8900/")),T=new Set(["Process","File","IpAddress","Asset","Risk","IpConnections","ProcessInboundConnections","ProcessOutboundConnections"]),R=function(e){var n,t=Object(S.a)(e);try{var a=function(){var e=n.value;if(!T.has(e.dgraph_type[0])){var t=Object(u.a)({},e.properties);delete e.properties,Object.keys(t).forEach((function(n){e[n]=t[n]}))}};for(t.s();!(n=t.n()).done;)a()}catch(r){t.e(r)}finally{t.f()}},z=function(){var e=Object(p.a)(d.a.mark((function e(n){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=B(n),e.next=3,fetch("".concat(D,"graphql"),{method:"post",body:JSON.stringify({query:t}),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e.data})).then((function(e){return e.lens_scope}));case 3:return a=e.sent,e.next=6,a;case 6:return r=e.sent,R(r.scope),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),B=function(e){return'\n    {\n        lens_scope(lens_name: "'.concat(e,'") {\n            uid,\n            node_key,\n            lens_name,\n            dgraph_type,\n            scope {\n                ... on Process {\n                    uid,\n                    node_key, \n                    dgraph_type,\n                    process_name, \n                    process_id,\n                    children {\n                        uid, \n                        node_key, \n                        dgraph_type,\n                        process_name, \n                        process_id,\n                    }, \n                    risks {  \n                        uid,\n                        dgraph_type,\n                        node_key, \n                        analyzer_name, \n                        risk_score\n                    },\n                }\n            \n                ... on Asset {\n                    uid, \n                    node_key, \n                    dgraph_type,\n                    hostname,\n                    asset_ip{\n                        ip_address\n                    }, \n                    asset_processes{\n                        uid, \n                        node_key, \n                        dgraph_type,\n                        process_name, \n                        process_id,\n                    },\n                    files_on_asset{\n                        uid, \n                        node_key, \n                        dgraph_type,\n                        file_path\n                    }, \n                    risks {  \n                        uid,\n                        dgraph_type,\n                        node_key, \n                        analyzer_name, \n                        risk_score\n                    },\n                }\n\n                ... on File {\n                    uid,\n                    node_key, \n                    dgraph_type,\n                    risks {  \n                        uid,\n                        dgraph_type,\n                        node_key, \n                        analyzer_name, \n                        risk_score\n                    },\n                }\n\n                ... on PluginType {\n                    predicates,\n                }\n            }\n        }\n    }\n')},U=function(e,n){var t=!1;return K(n,(function(a){Object.prototype.hasOwnProperty.call(e,a)||(t=!0,e[a]=n[a])})),t},H=function(e,n){if(!n.nodes&&!n.links)return null;var t,a={nodes:[],links:[]},r=!1,c=new Map,o=new Map,s=Object(S.a)(e.nodes);try{for(s.s();!(t=s.n()).done;){var i=t.value;c.set(i.uid,i)}}catch(j){s.e(j)}finally{s.f()}var l,u=Object(S.a)(n.nodes);try{for(u.s();!(l=u.n()).done;){var f=l.value,d=c.get(f.uid);d?U(d,f)&&(r=!0):(c.set(f.uid,f),r=!0)}}catch(j){u.e(j)}finally{u.f()}var p,m=Object(S.a)(e.links);try{for(m.s();!(p=m.n()).done;){var h=p.value;if(h){var g=h.source.uid||h.source,v=h.target.uid||h.target;o.set(g+h.label+v,h)}}}catch(j){m.e(j)}finally{m.f()}var b,y=Object(S.a)(n.links);try{for(y.s();!(b=y.n()).done;){var E=b.value,k=E.source||E.source,x=E.target||E.target;o.get(k+E.label+x)||(o.set(E.source+E.label+E.target,E),r=!0)}}catch(j){y.e(j)}finally{y.f()}return a.nodes=Array.from(c.values()),a.links=Array.from(o.values()),r?a:null},W=function(e,n){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&Array.isArray(e[t])){var a,r=Object(S.a)(e[t]);try{for(r.s();!(a=r.n()).done;){var c=a.value;void 0!==c.uid&&n(t,c)}}catch(o){r.e(o)}finally{r.f()}}},q=function(e,n){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&Array.isArray(e[t])){var a,r=Object(S.a)(e[t]);try{for(r.s();!(a=r.n()).done;){var c=a.value;void 0!==c.uid&&n(t,c)}}catch(o){r.e(o)}finally{r.f()}}},J=function(e){var n=e.dgraph_type||e.node_type;return n?Array.isArray(n)?n[0]:n:(console.warn("Unable to find type for node ",e),"Unknown")};function G(e,n){return Math.floor(Math.random()*(n-e+1)+e)}var V=function(e){var n=[],t=[];return function e(n,t){W(n,(function(a,r){t(n,a,r),e(r,t)}))}(e,(function(e,n,a){if("scope"!==n){if("Unknown"===J(e))return;if("Unknown"===J(a))return;if("Risk"===J(e))return;if("Risk"===J(a))return;t.push({source:e.uid,label:n,target:a.uid})}})),function e(n,t){t(n),W(n,(function(n,a){e(a,t)}))}(e,(function(e){var t=J(e);if("Unknown"!==t&&"Risk"!==t){var a=function(e,n){console.log("nodetype",e);var t=n;switch(e){case"Process":return t.process_name||t.process_id||"Process";case"Asset":return t.hostname||"Asset";case"File":return t.file_path||"File";case"IpAddress":return t.external_ip||"IpAddress";case"Lens":return t.lens||"Lens";default:return e||""}}(t,e),r=Object(u.a)({},e);r.risk=r.risk||0,r.analyzer_names=r.analyzer_names||"";var c,o=Object(S.a)(e.risks||[]);try{for(o.s();!(c=o.n()).done;){var s=c.value;r.risk+=s.risk_score||0,r.analyzer_names+=s.analyzer_name||""}}catch(i){o.e(i)}finally{o.f()}W(e,(function(e,n){r[e]=void 0})),n.push(Object(u.a)({name:e.uid,id:e.uid},r,{nodeType:t,nodeLabel:a,x:200+G(1,50),y:150+G(1,50)}))}})),{nodes:n,links:t}},X=(t(233),function(e,n,t){var a=t<.5?t*(1+n):t+n-t*n,r=2*t-a;return[(e/=360)+1/3,e,e-1/3].map((function(e){return e<0&&e++,e>1&&e--,e=e<1/6?r+6*(a-r)*e:e<.5?a:e<2/3?r+6*(a-r)*(2/3-e):r,Math.round(255*e)}))}),Y=function(e){return"[object Array]"===Object.prototype.toString.call(e)},$=function e(n){var t=this;Object(O.a)(this,e),this.hsl=function(e){var n,a,r=t.hash(e);if(t.hueRanges.length){var c=t.hueRanges[r%t.hueRanges.length];n=r/t.hueRanges.length%727*(c.max-c.min)/727+c.min}else n=r%359;return r=parseInt(r/360),a=t.S[r%t.S.length],r=parseInt(r/t.S.length),[n,a,t.L[r%t.L.length]]},this.rgb=function(e){var n=t.hsl(e);return X.apply(t,n)};var a=[(n=n||{}).lightness,n.saturation].map((function(e){return Y(e=e||[.35,.5,.65])?e.concat():[e]}));this.L=a[0],this.S=a[1],"number"===typeof n.hue&&(n.hue={min:n.hue,max:n.hue}),"object"!==typeof n.hue||Y(n.hue)||(n.hue=[n.hue]),"undefined"===typeof n.hue&&(n.hue=[]),this.hueRanges=n.hue.map((function(e){return{min:"undefined"===typeof e.min?0:e.min,max:"undefined"===typeof e.max?360:e.max}})),this.hash=n.hash||F},K=function(e,n){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(Array.isArray(e[t])?e[t].length>0&&void 0===e[t][0].uid&&n(t):n(t))},Q=function(){var e=Object(p.a)(d.a.mark((function e(n,t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,z(n).then(function(){var e=Object(p.a)(d.a.mark((function e(r){var c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=V(r),console.log("update",c),null!==(o=H(t.graphData,c))&&(t.curLensName===n?a(Object(u.a)({},t,{curLensName:n,graphData:o})):a(Object(u.a)({},t,{curLensName:n,graphData:c})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return console.error("Failed to retrieveGraph ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),Z=function(e){var n=e.lensName,t=e.setCurNode,c=r.a.useState(function(e){return{graphData:{nodes:[],links:[]},curLensName:e}}(n)),o=Object(l.a)(c,2),s=o[0],i=o[1],u=Object(a.useRef)(null);Object(a.useEffect)((function(){u.current.d3Force("link",N.b()),u.current.d3Force("collide",N.a(22)),u.current.d3Force("charge",N.c()),u.current.d3Force("box",(function(){s.graphData.nodes.forEach((function(e){var n=e.x||0,t=e.y||0;Math.abs(n)>1e3&&(e.vx*=-1),Math.abs(t)>1e3&&(e.vy*=-1)}))}))}),[s]),Object(a.useEffect)((function(){Q(n,s,i);var e=setInterval(Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,Q(n,s,i);case 3:case"end":return e.stop()}}),e)}))),1e3);return function(){return clearInterval(e)}}),[n,s]);var f=s.graphData,m=new $({});return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{graphData:f,nodeLabel:function(e){return e.nodeLabel},enableNodeDrag:!0,linkDirectionalParticles:1,linkDirectionalParticleWidth:function(e){return function(e,n){var t=A(e,n);return t>=75?5:t>=50?4:t>=25?3:2}(e,f)},linkDirectionalParticleColor:function(e){return M(e,f)},linkDirectionalParticleSpeed:.005,onNodeClick:function(e,n){t(e)},linkDirectionalArrowLength:8,linkWidth:4,linkDirectionalArrowRelPos:function(e){return function(e,n){var t=P(e.target.name,n.nodes);if(null===t||0===t.risk)return 1;var a=Object(w.a)(n.nodes).map((function(e){return e.risk})),r=L(t.risk,a);return 0===r?1:r>=75?.95:r>=50?.9:r>=25?.85:1}(e,f)},linkCanvasObjectMode:function(){return"after"},linkCanvasObject:function(e,n){var t=e.source,a=e.target;if(e.color=M(e,f),"object"===typeof t&&"object"===typeof a){var r=Object.assign.apply(Object,Object(w.a)(["x","y"].map((function(e){return Object(j.a)({},e,t[e]+(a[e]-t[e])/2)})))),c={x:a.x-t.x,y:a.y-t.y},o=Math.sqrt(Math.pow(c.x,2)+Math.pow(c.y,2))-96,s=Math.atan2(c.y,c.x);s>Math.PI/2&&(s=-(Math.PI-s)),s<-Math.PI/2&&(s=-(-Math.PI-s));var i=function(e){return"children"===e?"executed":e}(e.label);n.font="50px Arial";var l=Math.min(8,o/n.measureText(i).width);n.font="".concat(l+5,"px Arial");var u=n.measureText(i).width,d=[u+=Math.round(.25*u),l].map((function(e){return e+.2*l}));n.save(),n.translate(r.x,r.y),n.rotate(s),n.fillStyle="rgb(115,222,255,1)",n.fillRect.apply(n,[-d[0]/2,-d[1]/2].concat(Object(w.a)(d))),n.textAlign="center",n.textBaseline="middle",n.fillStyle="white",n.fillText(i,.75,3),n.restore()}},nodeCanvasObject:function(e,n,t){var a=function(e,n){var t=Object(w.a)(n.nodes).map((function(e){return e.risk})),a=L(e.risk,t);return a>=75?6:a>=25?5:4}(e,f);n.save(),n.beginPath(),n.arc(e.x,e.y,1.3*a,0,2*Math.PI,!1),n.fillStyle=function(e,n,t){var a=Object(w.a)(n.nodes).map((function(e){return e.risk})),r=L(e.risk,a);if(0===r){var c=C(e,t);return"rgba(".concat(c[0],", ").concat(c[1],", ").concat(c[2],", 1)")}return I(r)}(e,f,m),n.fill(),n.restore(),n.save(),n.beginPath(),n.arc(e.x,e.y,1.2*a,0,2*Math.PI,!1);var r=C(e,m);n.fillStyle="rgba(".concat(r[0],", ").concat(r[1],", ").concat(r[2],", 1)"),n.fill(),n.restore();var c=e.nodeLabel,o=15/t;n.font="".concat(o,"px Arial");var s=[n.measureText(c).width,o].map((function(e){return e+.2*o}));n.fillStyle="rgba(48, 48, 48, 0.8)",n.fillRect.apply(n,[e.x-s[0]/2,e.y-s[1]/2].concat(Object(w.a)(s))),n.textAlign="center",n.textBaseline="middle",n.fillStyle="rgba(0, 0, 0, 0.8)",n.fillStyle="white",n.fillText(c,e.x,e.y)},ref:u}))},ee=t(264),ne=t(271),te=t(272),ae=t(269),re=t(270),ce=t(266),oe=t(268),se=Object(ee.a)({root:{fontSize:"1em"},table:{minWidth:450},tableHeader:{fontSize:"18px",color:"#EAFDFF"}});var ie=function(e){var n=e.node,t=se(),a=new Set(["id","dgraph.type","__indexColor","risks","uid","scope","name","nodeType","nodeLabel","x","y","index","vy","vx","fx","fy"]);q(n,(function(e,n){a.add(e)}));var c={};return K(n,(function(e){var t=n[e];a.has(e)||t&&(e.includes("_time")?c[e]=new Date(t).toLocaleString():c[e]=t)})),r.a.createElement(re.a,null,r.a.createElement(ne.a,{className:t.table},function(e,n){return e?r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(ae.a,{align:"left",className:n.tableHeader},r.a.createElement("b",null," PROPERTY ")),r.a.createElement(ae.a,{align:"left",className:n.tableHeader},r.a.createElement("b",null," VALUE ")))):r.a.createElement(r.a.Fragment,null)}(n,t),r.a.createElement(te.a,null,Object.entries(c).map((function(e){var n=Object(l.a)(e,2),t=n[0],a=n[1];return r.a.createElement(oe.a,null,r.a.createElement(ae.a,{align:"left"},r.a.createElement("b",null,t)),r.a.createElement(ae.a,{align:"left"},a))})))))||"no no"},le=t(273),ue=t(96),fe=t.n(ue),de=t(126),pe=t.n(de),me=t(127),he=t.n(me),ge=t(274),ve=Object(ee.a)({root:{fontSize:"1rem"},button:{width:".005%",color:"white",backgroundColor:"#424242"},title:{fontSize:"25px",color:"#ffffff"},icon:{color:"#42C6FF",margin:"15px 0 0 10px"},expand:{color:"#42C6FF",margin:"0px"},header:{display:"flex"},table:{minWidth:450}});function be(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{key:e.lens},r.a.createElement(ae.a,{component:"th",scope:"row"},r.a.createElement(le.a,{onClick:function(){e.setLens(e.lens)}},e.lens+"\t\t"+e.score))))}function ye(e){var n=e.setLens,t=Object(a.useState)({toggled:!0,lenses:[]}),c=Object(l.a)(t,2),o=c[0],s=c[1],i=ve();return Object(a.useEffect)((function(){var e=setInterval((function(){console.log("Fetching lenses"),ke().then((function(e){e.lenses&&e.lenses!==o.lenses&&s(Object(u.a)({},o,{lenses:e.lenses||[]}))}))}),1e3);return function(){return clearInterval(e)}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i.header},r.a.createElement("b",{className:i.title},r.a.createElement(pe.a,{className:i.icon}),"LENSES"),r.a.createElement(le.a,{className:i.button,onClick:function(){s(Object(u.a)({},o,{toggled:!o.toggled}))}},r.a.createElement(fe.a,{className:i.expand}))),r.a.createElement("div",{className:"lensToggle"},o.toggled&&o.lenses&&o.lenses.map((function(e){return r.a.createElement(re.a,null,r.a.createElement(ne.a,{className:i.table,"aria-label":"lens table"},r.a.createElement(te.a,null,r.a.createElement(be,{key:Number(e.uid),uid:e.uid,lens:e.lens_name,score:e.score,setLens:n}))))}))),r.a.createElement(ge.a,null))}var Ee=function(e){return"http://"+window.location.hostname+(e||":8900/")}(":5000/"),ke=function(){var e=Object(p.a)(d.a.mark((function e(){var n,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching graph from",Ee),"\n    {\n        lenses {\n            uid,\n            node_key,\n            lens_name,\n            score\n        }\n    }\n    ",e.next=4,fetch("".concat(Ee,"graphql"),{method:"post",body:JSON.stringify({query:"\n    {\n        lenses {\n            uid,\n            node_key,\n            lens_name,\n            score\n        }\n    }\n    "}),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e.errors&&console.error("lenses failed",e.errors),e.data={lenses:[]},e})).then((function(e){return e.data}));case 4:return n=e.sent,e.next=7,n;case 7:return t=e.sent,e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(e){var n=e.node;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{node:n}))};function je(e){var n=e.curNode,t=Object(a.useState)(!0),c=Object(l.a)(t,2),o=c[0],s=c[1],i=ve();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:i.header},r.a.createElement("b",{className:i.title},r.a.createElement(he.a,{className:i.icon})," NODE"),r.a.createElement(le.a,{className:i.button,onClick:function(){s((function(e){return!e}))}},r.a.createElement(fe.a,{className:i.expand}))),r.a.createElement("div",{className:"nodeToggle"},o&&n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,{node:n})))))}function we(e){var n=e.setLens,t=e.curNode;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,{setLens:n}),r.a.createElement(je,{curNode:t}))}var Oe=t(5),_e=t(282),Ne=t(280),Se=t(275),Le=t(276),Pe=t(278),Ae=t(277),Fe=t(128),Ce=t.n(Fe),Ie=Object(ee.a)((function(e){return Object(_e.a)({root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(500,"px)"),marginLeft:500,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2),color:"#42C6FF"},hide:{display:"none"},drawer:{width:500,flexShrink:0},drawerPaper:{width:500},drawerHeader:Object(u.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-500},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},lensName:{color:"#EAFDFF",fontSize:"2rem",margin:"10px 15px 0px 0px"},header:{fontSize:"35px"},close:{color:"#42C6FF"}})}));function Me(e){var n=e.setLens,t=e.curLens,a=e.curNode,c=Ie(),o=r.a.useState(!0),s=Object(l.a)(o,2),i=s[0],u=s[1];return r.a.createElement("div",{className:c.root},r.a.createElement(Se.a,{position:"fixed",className:Object(Oe.a)(c.appBar,Object(j.a)({},c.appBarShift,i))},r.a.createElement(Le.a,null,r.a.createElement(Ae.a,{color:"inherit","aria-label":"open drawer",onClick:function(){u(!0)},edge:"start",className:Object(Oe.a)(c.menuButton,i&&c.hide)},"\u2630"),r.a.createElement(Pe.a,{variant:"h5",noWrap:!0},r.a.createElement("b",{className:c.header}," GRAPL")))),r.a.createElement(Ne.a,{className:c.drawer,variant:"persistent",anchor:"left",open:i,classes:{paper:c.drawerPaper}},r.a.createElement("div",{className:c.drawerHeader},r.a.createElement(le.a,{onClick:function(){u(!1)}},r.a.createElement(Ce.a,{className:c.close}))),r.a.createElement(ge.a,null),r.a.createElement(we,{setLens:n,curNode:a})),r.a.createElement("main",{className:Object(Oe.a)(c.content,Object(j.a)({},c.contentShift,i))},r.a.createElement("div",{className:c.drawerHeader}),r.a.createElement("h3",{className:c.lensName},t||""),r.a.createElement(Pe.a,{paragraph:!0})))}var De=function(){var e=r.a.useState({curLens:"",curNode:null}),n=Object(l.a)(e,2),t=n[0],a=n[1];return console.log("EngagementUX: curLens, ",t.curLens),r.a.createElement(r.a.Fragment,null,r.a.createElement(Me,{setLens:function(e){return a(Object(u.a)({},t,{curLens:e}))},curLens:t.curLens,curNode:t.curNode}),r.a.createElement(Z,{lensName:t.curLens,setCurNode:function(e){a(Object(u.a)({},t,{curNode:e}))}}))};console.log("App loading");var Te=function(e,n,t){n(Object(u.a)({},e,{curPage:t})),localStorage.setItem("grapl_curPage",t)},Re=function(){var e=r.a.useState({curPage:localStorage.getItem("grapl_curPage")||"login",lastCheckLoginCheck:Date.now()}),n=Object(l.a)(e,2),t=n[0],c=n[1];return Object(a.useEffect)((function(){"login"!==t.curPage&&Date.now()-t.lastCheckLoginCheck>1e3&&g().then((function(e){console.log("Not logged in, redirecting."),e||"login"===t.curPage||Te(t,c,"login")}))})),"login"===t.curPage?(console.log("routing to engagement_ux page"),r.a.createElement(v,{loginSuccess:function(){return Te(t,c,"engagement_ux")}})):"engagement_ux"===t.curPage?(console.log("routing to login page"),r.a.createElement(De,null)):(console.warn("Invalid Page State"),r.a.createElement("div",null,"Invalid Page State"))};function ze(){return console.log("App loaded"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Re,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Be=Object(s.a)({palette:{type:"dark",primary:{main:"#373740"}}}),Ue=document.getElementById("root");o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{theme:Be},r.a.createElement(ze,null),",")),Ue),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[147,1,2]]]);
//# sourceMappingURL=main.dd0f58b4.chunk.js.map